(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(8),l=a.n(s),c=(a(16),a(1)),i=a(2),o=a(4),u=a(3),d=a(5),h=a(9),m=a(6),p=function(){function e(t){Object(c.a)(this,e),this.monthsPerYear=[null,"Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],this.daysPerMonth=[null,31,28,31,30,31,30,31,31,30,31,30,31];var a=this.createDateStrings(t),n=this.createMonthString(a);this.data={dates:a,months:n,today:this.today,prev:this.prev,next:this.next}}return Object(i.a)(e,[{key:"createDateStrings",value:function(e){for(var t=this.setBaseDate(e),a=[],n=0;n<28;n++){var r,s=new Date(t);s.setDate(s.getDate()+n),r=this.dateToString(s),a.push(r),this.isToday(s)&&(this.today=r),7===n&&(this.next=r)}var l=new Date(t);return l.setDate(l.getDate()-7),this.prev=this.dateToString(l),a}},{key:"dateToString",value:function(e){var t=e.getYear()+1900,a=e.getMonth()+1,n=e.getDate();return a<10&&(a="0".concat(a)),n<10&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)}},{key:"findPreviousSunday",value:function(e){var t=e.setDate(e.getDate()-e.getDay()),a=new Date(t);return a.setHours(0,0,0,0),a}},{key:"isToday",value:function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}},{key:"isValidDate",value:function(e,t,a){return!(t<1||t>12)&&(e%4===0&&(this.daysPerMonth[2]=29),!(a<1||a>this.daysPerMonth[t]))}},{key:"setDateParts",value:function(e){if(!e||!e.match(/^\d{4}-\d{1,2}-\d{1,2}$/))return!1;var t=e.split("-").map(function(e){return Number(e)}),a=Object(m.a)(t,3);return[a[0],a[1],a[2]]}},{key:"setBaseDate",value:function(e){var t=this.setDateParts(e),a=t&&this.isValidDate.apply(this,Object(h.a)(t))?new Date(t[0],t[1]-1,t[2]):new Date;return this.findPreviousSunday(a)}},{key:"createMonthString",value:function(e){var t=e[0].split("-"),a=e[e.length-1].split("-"),n=this.monthsPerYear[Number(t[1])],r=this.monthsPerYear[Number(a[1])],s=t[0],l=a[0],c=s===l&&n!==r;return s===l&&n===r?"".concat(n," ").concat(l):c?"".concat(n," / ").concat(r," ").concat(s):"".concat(n," ").concat(s," / ").concat(r," ").concat(l)}}]),e}(),f=function(e){return r.a.createElement("header",{className:"CalendarHeader"},r.a.createElement("button",{id:"HeaderArrowLeft",className:"CalendarHeaderArrow",onClick:function(){return window.location.hash=e.prev}}," \xab "),r.a.createElement("h1",{className:"CalendarHeading"},e.title),r.a.createElement("button",{id:"HeaderArrowRight",className:"CalendarHeaderArrow",onClick:function(){return window.location.hash=e.next}}," \xbb "))},v=function(){return r.a.createElement("ul",{className:"CalendarWeek"},r.a.createElement("li",null,r.a.createElement("code",null,"Sun",r.a.createElement("span",{className:"desktop"},"day"))),r.a.createElement("li",null,r.a.createElement("code",null,"Mon",r.a.createElement("span",{className:"desktop"},"day"))),r.a.createElement("li",null,r.a.createElement("code",null,"Tue",r.a.createElement("span",{className:"desktop"},"sday"))),r.a.createElement("li",null,r.a.createElement("code",null,"Wed",r.a.createElement("span",{className:"desktop"},"nesday"))),r.a.createElement("li",null,r.a.createElement("code",null,"Thu",r.a.createElement("span",{className:"desktop"},"rsday"))),r.a.createElement("li",null,r.a.createElement("code",null,"Fri",r.a.createElement("span",{className:"desktop"},"day"))),r.a.createElement("li",null,r.a.createElement("code",null,"Sat",r.a.createElement("span",{className:"desktop"},"urday"))))},y=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"getDate",value:function(e){var t=e.target.closest(".first-month")||e.target.closest(".second-month");this.props.onClick(t.getAttribute("id"))}},{key:"render",value:function(){for(var e=this.props.dates,t=[],a=Number(e[0].split("-")[1]),n=0;n<28;n++){var s=e[n],l=Number(s.split("-")[2]),c=["CalendarDate",a===Number(s.split("-")[1])?"first-month":"second-month",this.props.today===s?"today":""].join(" "),i=this.props.schedule[s]?this.props.schedule[s].map(function(e){return r.a.createElement("li",{key:e},e)}):"",o=this.props.schedule[s]?r.a.createElement("div",{className:"CalendarMobileEntry"}):"";t.push(r.a.createElement("li",{key:s,id:s,className:c,onClick:this.getDate.bind(this)},r.a.createElement("div",{className:"CalendarDateNumber"},l),r.a.createElement("ul",{className:"CalendarDateSchedule desktop"},i),o))}return r.a.createElement("ul",{className:"CalendarBody"},t)}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state=new p(e.date).data,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillUpdate",value:function(e){if(this.props.date!==e.date){var t=new p(e.date).data;this.setState(t)}}},{key:"render",value:function(){return r.a.createElement("main",{className:"Calendar"},r.a.createElement(f,{title:this.state.months,prev:this.state.prev,next:this.state.next}),r.a.createElement(v,null),r.a.createElement(y,{dates:this.state.dates,today:this.state.today,schedule:this.props.schedule,onClick:this.props.onClick}))}}]),t}(n.Component),E=function(){function e(t){Object(c.a)(this,e),this.url="https://spreadsheets.google.com/feeds/list/".concat(t,"/default/public/values?alt=json")}return Object(i.a)(e,[{key:"fetch",value:function(){return this.getAjax(this.url).then(this.filter)}},{key:"filter",value:function(e){var t=[];return e.feed.entry.forEach(function(e){var a={};for(var n in e)if("gsx$"===n.substring(0,4)){var r=e[n].$t;a[n.slice(4)]=r&&isFinite(r)?parseFloat(r):r||null}t.push(a)}),t}},{key:"getAjax",value:function(e){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){if(n.status>=200&&n.status<400){var e=n.responseText;t(JSON.parse(e))}else a(Error(n.statusText))},n.onerror=function(){a(Error("Network Error"))},n.send()})}}]),e}(),k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=function(e){var t=e.schedule?e.schedule.map(function(e){return r.a.createElement("li",{key:e},e)}):null,a=["Sidebar",e.schedule?"open":null].join(" ");return r.a.createElement("aside",{className:a,onClick:e.onClick},r.a.createElement("h2",null,r.a.createElement("code",null,function(e){if(!e)return null;var t=e.split("-").map(function(e){return Number(e)}),a=Object(m.a)(t,3),n=a[0],r=a[1],s=a[2],l=new Date(n,r-1,s),c=k[l.getDay()];return"".concat(c," ").concat(r,"/").concat(s)}(e.date))),r.a.createElement("ul",null,t))},D=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).events={peru:"2018-06-15",laytcomers:"2019-04-20",guatemala:"2019-06-15"},e.state={date:e.getDateHash(),schedule:[]},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){var e=this;new E("1d9BnXOfxtv65dAbfbeNvVEpyqYmgMDRKkiC-o5k-T1M").fetch().then(function(t){return e.setState({schedule:e.formatScheduleData(t)})})}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("hashchange",function(t){e.setState({date:e.getDateHash()})})}},{key:"formatScheduleData",value:function(e){for(var t="",a={},n=0;n<e.length;n++){var r=e[n];a[t=r.date?r.date:t]=a[t]||[],a[t].push(r.plans)}return a}},{key:"getDateHash",value:function(){var e=window.location.hash.substring(1);return this.events[e]||e}},{key:"onDateClick",value:function(e){this.setState({sbDate:e,sbSchedule:this.state.schedule[e]})}},{key:"onSidebarClick",value:function(){this.setState({sbDate:null,sbSchedule:null})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,{date:this.state.date,schedule:this.state.schedule,onClick:this.onDateClick.bind(this)}),r.a.createElement(g,{date:this.state.sbDate,schedule:this.state.sbSchedule,onClick:this.onSidebarClick.bind(this)}))}}]),t}(n.Component);l.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.8ab5a9fe.chunk.js.map